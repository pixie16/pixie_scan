<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Pixie16 Analysis Software Suite: Changes for Version 2</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">Pixie16 Analysis Software</a>&nbsp;&raquo&nbsp;<a class="el" href="refman.html">Reference Manual</a>&nbsp;&raquo&nbsp;<a class="el" href="changes-v3.html">Changes for Version 3</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="changes-v2">Changes for Version 2 </a></h1><h2><a class="anchor" id="sec-general">
General changes</a></h2>
<ul>
<li>Consistency in the naming conventions of variables/classes included in the code</li>
<li>Names made more descriptive when necessary</li>
<li>Prevent as much copying of information between classes for optimization</li>
<li>Old ROOT-style functionality currently unimplemented</li>
<li>C++ streams used instead of stdio functions as much as possible</li>
<li>Comments improved -- simple coding statements within comments removed</li>
<li>Unused variables removed, or commented out when the extension of the program to include their eventual use is evident</li>
<li>Classes are more const correct and therefore users shouldn't be able to mess up things that they shouldn't touch</li>
</ul>
<h2><a class="anchor" id="sec-correlator">
Correlator.cpp</a></h2>
<ul>
<li>Previously called <code>correlator.cpp</code> </li>
<li>Header now includes correlation structures (previously in <code>raw_event.cpp</code>) with different structures for implants and decays</li>
<li>Now only one main correlation function exists</li>
<li>DSSD decay spectra plotting now located in DssdProcessor.cpp</li>
</ul>
<h2><a class="anchor" id="sec-histo">
DeclareHistogram.cpp</a></h2>
<ul>
<li>New set of global functions which take over the behaviour of <code>drrsub.f</code> </li>
<li>Main plotting functions and generic low-level histogram definitions defined here</li>
<li>All used DAMM plot ids defined in damm_plotids.h</li>
<li>No DSSD strip spectra automatically defined</li>
</ul>
<h2><a class="anchor" id="sec-driver">
DetectorDriver.cpp</a></h2>
<ul>
<li><b>Major</b> changes</li>
<li>Previously called <code>detector_driver.cpp</code> </li>
<li>Calculation of calibrated energies now in Calibration class</li>
<li>Significant reduction of members of <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a></li>
<li>Simple sanity check function to be run at beginning of analysis</li>
<li>Most of analysis is now done through a vector of event processors</li>
<li>Raw event is now accessed globally</li>
<li>Calibrated spectra are now defaulted to damm id# <img class="formulaInl" alt="$200+ch$" src="form_0.png"/></li>
<li>Calbrations are now matched to the channel identifiers so only one consistent reading of <code>map.txt</code> is done</li>
<li>Random number initializations now done here and are scaled appropriately by the contraction factor of the Pixie energies</li>
<li>A local copy of the analysis' used detectors is no longer made</li>
<li>Detector summaries have been moved to the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> class</li>
<li>No "temppoint" handling of detector summaries, instead each <a class="el" href="d2/d58/classEventProcessor.html" title="Class to handle event processing.">EventProcessor</a> will keep its own individual map of detector summaries for the detectors it is interested in</li>
</ul>
<h2><a class="anchor" id="sec-dssd">
DssdProcessor.cpp</a></h2>
<ul>
<li>Previously called <code>dssd_sub.cpp</code> </li>
<li>Handles much of the correlation work that was previously done by the <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a></li>
<li>Decays required to be anti-coincident with MCP signals</li>
<li>Plotting for decay spectra now done here</li>
</ul>
<h2><a class="anchor" id="sec-event">
EventProcessor.cpp</a></h2>
<ul>
<li>New class which defines the generic behaviour for the processor which handle events for detectors of different types</li>
<li>Includes an interface to ROOT for each individual processor</li>
</ul>
<h2><a class="anchor" id="sec-geprocessor">
GeProcessor.cpp</a></h2>
<ul>
<li>Previously called <code>ge.cpp</code> </li>
<li>Number of clovers is now determined using the global vector of identifiers not from reading <code>map.txt</code> </li>
</ul>
<h2><a class="anchor" id="sec-make">
Makefile</a></h2>
<ul>
<li>Implicit rules used for most targets</li>
<li>REVISIOND flag added to support Pixie Rev. D modules</li>
<li>Target "dist" and "distdocs" added to make tarball of code</li>
</ul>
<h2><a class="anchor" id="sec-mcpx">
McpProcessor.cpp</a></h2>
<ul>
<li>Previously called <code>mcp.cpp</code> </li>
<li>Now includes a simple branch for "new"-style ROOT analysis</li>
</ul>
<h2><a class="anchor" id="sec-mtc">
MtcProcessor.cpp</a></h2>
<ul>
<li>Previously called <code>timeclass.cpp</code> </li>
<li>Handling of old TOF timeclass for NSCL experiments not currently implemented</li>
</ul>
<h2><a class="anchor" id="sec-pixiestd">
PixieStd.cpp</a></h2>
<ul>
<li><b>Major</b> changes</li>
<li>Previously called <code>pixie_std.cpp</code> </li>
<li>Chunks starting with a -1 delimiter are now skipped over while looking for the beginning of a spill</li>
<li>If only the last 5-word chunk is missing from the spill, it is reconstructed</li>
<li>The last 5-word chunk is checked to verify that it is the last chunk expected for the spill</li>
<li>Real, system, and user time in analysis reported occasionally</li>
<li>Random number initialization moved to DetectorDriver.cpp</li>
<li>Modules are only expected to be read out cyclically</li>
<li>Support up to 14-slot crates</li>
<li>Stand-alone ROOT support currently not implemented</li>
<li>Events now placed into the list of events using their pointers, so they do not need to be copied</li>
<li>Channel identification index numbers are now extracted from the module and channel number in <code>map.txt</code> not according to the order of appearance in the file</li>
<li>Multiple definitions of the same channel in <code>map.txt</code> will now produce an error</li>
<li>Platform independce now more obvious through definition of word_t</li>
</ul>
<h2><a class="anchor" id="sec-raw">
RawEvent.cpp</a></h2>
<ul>
<li><b>Major</b> changes</li>
<li>Previously called <code>rawevent.cpp</code> </li>
<li>Structures for correlation now connected with Correlator.cpp</li>
<li>Actual <a class="el" href="d4/db9/classCorrelator.html" title="correlate decays with previous implants">Correlator</a> class now included in the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a></li>
<li>Channel IDs are now returned directly from the data imported from <code>map.txt</code> -- individual channel events do not contain their own copies</li>
<li>ID numbers are calculated (not stored) using module and channel numbers</li>
<li>Much less "structification" for channel events -- ReadBuffData() is a friend to set information. In particular, getting a copy of the trace is no longer supported as this can create a large burden on the analysis</li>
<li>Detector summaries are now stored with the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> instead of in the <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a></li>
<li>Detector summaries now address their constituent events by pointer (not by arbitrary index in <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a>)</li>
<li>One function call to handle all details regarding associating a channel event to a particular <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a></li>
<li>Less "structification" for the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> -- access to detector summaries is only allowed by pointers to prevent copying of large amounts of channel data</li>
<li>Asking for an unexpected <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a> will complain accordingly</li>
</ul>
<h2><a class="anchor" id="sec-buf">
ReadBuffData.cpp</a></h2>
<ul>
<li>A version for both Rev. A and Rev. D of the Pixie modules</li>
<li>Main function now directly takes a pointer to the beginning of the data to be processed of Pixie words of the appropriate size</li>
<li>Identifiers are no longer set since they are calculated dynamically in RawEvent.cpp</li>
</ul>
<h2><a class="anchor" id="sec-root">
RootProcessor.cpp</a></h2>
<ul>
<li>New tact of creating ROOT trees where the data is broken into its constituent detector parts (saved as branches) by the event processors. This is in contrast to the old method of saving raw event data</li>
</ul>
<h2><a class="anchor" id="sec-scint">
ScintProcessor.cpp</a></h2>
<ul>
<li>Previously called <code>scint.cpp</code> </li>
<li>If no Ge detectors are present, processor asks for a NULL detectors summary which has to be treated properly</li>
<li>No more triple counting for plots</li>
<li>Discombobulated in general</li>
</ul>
<h2><a class="anchor" id="sec-stats">
StatsAccumulator.cpp</a></h2>
<ul>
<li>New simple class which provides a consistent and concise way of calculating means and standard deviations</li>
<li>Designed to work with the STL accumulate algorithm defined in <code>numeric</code> </li>
<li>Example of use in TraceAnalyzer.cpp</li>
</ul>
<h2><a class="anchor" id="sec-trace">
TraceAnalyzer.cpp</a></h2>
<ul>
<li>Previously called <code>trace.cpp</code> </li>
<li>Better implementation of STL methods</li>
<li>Filter functions now includes a version to fill the vector in place so an unnecessary copy is not made</li>
<li>Processing time information is included </li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Jun 2016 for Pixie16 Analysis Software Suite by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
