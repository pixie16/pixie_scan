<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Pixie16 Analysis Software Suite: Primer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">Pixie16 Analysis Software</a>&nbsp;&raquo&nbsp;<a class="el" href="useman.html">User's Manual</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="primer">Primer </a></h1><p>In this section I will attempt to provide a rough description of the aspects of C++ that are being used in the analysis code that someone who has never seen C++ before may not recognize. Described here are</p>
<ul>
<li>classes</li>
<li>pointers</li>
<li>vectors</li>
<li>and maps</li>
</ul>
<p>For more information on any of the topics mentioned here you are referred to the fantastic resource <a href="http://www.cplusplus.com/">cplusplus.com</a>. This webpage has many thorough descriptions of the ideas presented here, as well as, a complete method listing for the STL templates discussed.</p>
<h2><a class="anchor" id="Classes">
Classes</a></h2>
<p>The C++ code is structured around classes. Classes are very similar to structures in C, and are objects into which data is placed or actions are performed. Functions that are contained within classes are called "methods". For example, the class <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> is the basic object into which all event data will be placed in the analysis. Another example is the class <a class="el" href="d1/d90/classGeProcessor.html" title="Processor to handle Ge (read as clover) events.">GeProcessor</a>, which performs much more complex manipulations of data that is taken using Ge detectors. In the analysis, all classes consist of two different files: a '.hpp' file, and a '.cpp' file. The '.hpp' file defines the class, its data members, and the methods that allow a user to manipulate the data members. The ".cpp" file contains the code necessary for the class to do what you want. The following code shows an example for the class called <a class="el" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> that contains the information for each channel that triggered. Below, we list the content of <a class="el" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> in its entirety.</p>
<div class="fragment"><pre class="fragment">
<span class="preprocessor">#ifndef __CHANEVENT_HPP</span>
<span class="preprocessor"></span><span class="preprocessor">#define __CHANEVENT_HPP</span>
<span class="preprocessor"></span>
<span class="preprocessor">#include &lt;vector&gt;</span>
<span class="preprocessor">#include &quot;<a class="code" href="d9/def/DetectorLibrary_8hpp.html" title="This is an extension of the vector of the identifiers that was previously used.">DetectorLibrary.hpp</a>&quot;</span>
<span class="preprocessor">#include &quot;pixie16app_defs.h&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="d9/dec/Identifier_8hpp.html" title="Defines identifying information for channels.">Identifier.hpp</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="d5/d64/Globals_8hpp.html" title="constant parameters used in pixie16 analysis">Globals.hpp</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="da/d72/Trace_8hpp.html" title="A simple class to store the traces.">Trace.hpp</a>&quot;</span>

<span class="keyword">class </span><a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> {
<span class="keyword">public</span>:
    <a class="code" href="dc/d00/classChanEvent.html#a91354618705889329051f1dfec3c8922">ChanEvent</a>(){<a class="code" href="dc/d00/classChanEvent.html#abff38ed280feca801ccb8e77ceb55d40">ZeroNums</a>();};

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#aee11a04fd2f7ccaa636dfbb3cc5744ba">SetEnergy</a>(<span class="keywordtype">double</span> a) {<a class="code" href="dc/d00/classChanEvent.html#ad30bf978466baebcfcec7799902d07af">energy</a> = a;}

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#a6cc4a6a95fcc00e89b1532bd9230e83a">SetCalEnergy</a>(<span class="keywordtype">double</span> a) {<a class="code" href="dc/d00/classChanEvent.html#ad2c627e2cfb795e24e40c7604033551b">calEnergy</a> = a;}

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#afcc76b14b5c5060b1e826c8c761b085d">SetTime</a>(<span class="keywordtype">double</span> a) {<a class="code" href="dc/d00/classChanEvent.html#a0b75178427ac33f81966be9c96e745d7">time</a> = a;}

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#a56a31c9ab7648a105d23e68fe0e0ad3e">SetCorrectedTime</a>(<span class="keywordtype">double</span> a) { <a class="code" href="dc/d00/classChanEvent.html#a5ef4159411d41cc6774e86b68c15dac3">correctedTime</a> = a;}

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#a8d15601c14100efa98ac91b505713942">SetCalTime</a>(<span class="keywordtype">double</span> a) {<a class="code" href="dc/d00/classChanEvent.html#ad28a92d504ead149fb87147d7b35eb52">calTime</a> = a;}

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#af863fc9e493c1693f2a4489783f16d65">SetHighResTime</a>(<span class="keywordtype">double</span> a) {<a class="code" href="dc/d00/classChanEvent.html#a76552aabcf70735491f2b764a223ace8">highResTime</a> =a;}

    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a8dcf3c9960a2667b9973b979008d4575">GetCfdSourceBit</a>()<span class="keyword"> const </span>{
    <span class="keywordflow">return</span>(<a class="code" href="dc/d00/classChanEvent.html#a6e0767f09fd0d7af3cd0cd0fad0fb85f" title="The ADC that the CFD/FPGA synched with.">cfdTrigSource</a>);
    }
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a4129d27b51a58a299c969a6dbe68cf6f">CfdForceTrig</a>()<span class="keyword"> const </span>{
    <span class="keywordflow">return</span>(<a class="code" href="dc/d00/classChanEvent.html#a24010d80716d8e28831b5d2a160a4d6e" title="CFD was forced to trigger.">cfdForceTrig</a>); 
    }

    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#aee800e37117d160bb28c7af2dc2fa507">GetEnergy</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#ad30bf978466baebcfcec7799902d07af">energy</a>;   
    }
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#a75557f724027ddd16068782eabe064f2">GetCalEnergy</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#ad2c627e2cfb795e24e40c7604033551b">calEnergy</a>;   
    }
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#a745048f7063f27ac23ec98e60cb601e0">GetCorrectedTime</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a5ef4159411d41cc6774e86b68c15dac3">correctedTime</a>;   
    }
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#ab4c5aa5c9cdfe341e37b7f6c05942da5">GetTime</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a0b75178427ac33f81966be9c96e745d7">time</a>;   
    }
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#a0867fbb8ecea385d607eede985788c4f">GetCalTime</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#ad28a92d504ead149fb87147d7b35eb52">calTime</a>;   
    }
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#ab9ec92b4a81f7b29ec737ddbeb11ae62">GetHighResTime</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a76552aabcf70735491f2b764a223ace8">highResTime</a>;   
    }
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#abda1a9c23e682e62875c4a44fbf281ba">GetEventTime</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#ab5cfa561cedd8608edc0b14b09d5226e">eventTime</a>;   
    }
    <span class="keyword">const</span> <a class="code" href="d4/d8b/classTrace.html" title="Store the information for a trace.">Trace</a>&amp; <a class="code" href="dc/d00/classChanEvent.html#a83cb82dac87727e470449b2d33cfd7f7">GetTrace</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a40694528265c68cda3023bbbd76afcff">trace</a>;   
    }
    <a class="code" href="d4/d8b/classTrace.html" title="Store the information for a trace.">Trace</a>&amp; <a class="code" href="dc/d00/classChanEvent.html#a83cb82dac87727e470449b2d33cfd7f7">GetTrace</a>() {
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a40694528265c68cda3023bbbd76afcff">trace</a>;   
    }
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#a2a772a8a1d572d4beab7a248a754d384">GetTrigTime</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a70bcc9a562bade3020845ced887c2198">trigTime</a>;   
    }
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#acc12cc0673fa9098a32902ad7ae9e99a">GetEventTimeLo</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a1608280b9b4b724452a4541ed4accdec">eventTimeLo</a>;   
    }
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#ad595ca5c48478bf45d56f41e1374aede">GetEventTimeHi</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a609c2e1d4662ecab1fb07c127b8a2971">eventTimeHi</a>;   
    }
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#a2da6a2d8950ee2d9cf00d56652dd80db">GetRunTime0</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a54539bdd0b61cb33d432c5f51fc00159">runTime0</a>;   
    }
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#ae8766c2aacea2adad9fcd3e20083d804">GetRunTime1</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a9d2d49ec4128d38a6e1a44c9a9becbaf">runTime1</a>;   
    }
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#a1a27b4df46f1e0079fed0db399d39a33">GetRunTime2</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a59d094d740134b416f5a48645bc18ba4">runTime2</a>;   
    }
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#adad840aab2e6d4a0996e99c5dfb9a36e">IsPileup</a>()<span class="keyword"> const </span>{
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a42e258ea7354d77bf9070834e467a30f">pileupBit</a>;   
    }
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a61452b9b242e468e988d426a40a20771">IsSaturated</a>()<span class="keyword"> const </span>{ 
        <span class="keywordflow">return</span> <a class="code" href="dc/d00/classChanEvent.html#a6ea3532fb27fd6eeaec285cd5cad9c69">saturatedBit</a>;
    }

    <span class="keyword">const</span> <a class="code" href="d1/de3/classIdentifier.html" title="Channel identification.">Identifier</a>&amp; <a class="code" href="dc/d00/classChanEvent.html#ae63d72c6d4699929a1e7f834b07f3c56">GetChanID</a>() <span class="keyword">const</span>;
    <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a0956fd3fac3f25a11cf379a855303a8c">GetID</a>() <span class="keyword">const</span>;
    <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="dc/d00/classChanEvent.html#aecf9f9470d0db50fe009d261effccf8f">GetQdcValue</a>(<span class="keywordtype">int</span> i) <span class="keyword">const</span>;

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#a70751f8d280112b4a84065430c388dfb">ZeroVar</a>();
<span class="keyword">private</span>:
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#ad30bf978466baebcfcec7799902d07af">energy</a>;             
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#ad2c627e2cfb795e24e40c7604033551b">calEnergy</a>;          
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#ad28a92d504ead149fb87147d7b35eb52">calTime</a>;            
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#a5ef4159411d41cc6774e86b68c15dac3">correctedTime</a>;      
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#a76552aabcf70735491f2b764a223ace8">highResTime</a>;        
    <a class="code" href="d4/d8b/classTrace.html" title="Store the information for a trace.">Trace</a> <a class="code" href="dc/d00/classChanEvent.html#a40694528265c68cda3023bbbd76afcff">trace</a>;               
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#a70bcc9a562bade3020845ced887c2198">trigTime</a>;    
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#ac03bece4f3c78baf8241a34631ebdd23">cfdTime</a>;     
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#a1608280b9b4b724452a4541ed4accdec">eventTimeLo</a>; 
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#a609c2e1d4662ecab1fb07c127b8a2971">eventTimeHi</a>; 
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#a54539bdd0b61cb33d432c5f51fc00159">runTime0</a>;    
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#a9d2d49ec4128d38a6e1a44c9a9becbaf">runTime1</a>;    
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#a59d094d740134b416f5a48645bc18ba4">runTime2</a>;    
    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a2bb7515053e46dfd771738494520d77b">numQdcs</a> = 8;     
    <a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> <a class="code" href="dc/d00/classChanEvent.html#ad492008bac2aa451cb64920539f3c538">qdcValue</a>[<a class="code" href="dc/d00/classChanEvent.html#a2bb7515053e46dfd771738494520d77b">numQdcs</a>];  
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#a0b75178427ac33f81966be9c96e745d7">time</a>;               
    <span class="keywordtype">double</span> <a class="code" href="dc/d00/classChanEvent.html#ab5cfa561cedd8608edc0b14b09d5226e">eventTime</a>;          
    <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a919803ce9edd7d76a6e21d405cf40891">modNum</a>;             
    <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a0a5d1d05b46e59d0ac2c04f26ffc0533">chanNum</a>;            
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a2d2977ef4507e25979a0b53ced0da4e6">virtualChannel</a>; 
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a42e258ea7354d77bf9070834e467a30f">pileupBit</a>;      
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a6ea3532fb27fd6eeaec285cd5cad9c69">saturatedBit</a>;   
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a24010d80716d8e28831b5d2a160a4d6e" title="CFD was forced to trigger.">cfdForceTrig</a>;   
    <span class="keywordtype">bool</span> <a class="code" href="dc/d00/classChanEvent.html#a6e0767f09fd0d7af3cd0cd0fad0fb85f" title="The ADC that the CFD/FPGA synched with.">cfdTrigSource</a>;  

    <span class="keywordtype">void</span> <a class="code" href="dc/d00/classChanEvent.html#abff38ed280feca801ccb8e77ceb55d40">ZeroNums</a>(<span class="keywordtype">void</span>); 
    <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a695c275fd0cb55905de284f81a0d54e7">ReadBuffDataA</a>(<a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *, std::vector&lt;ChanEvent *&gt; &amp;);
    <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a28cae513f2cad2f5b415dcec70ef4aa2">ReadBuffDataD</a>(<a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *, std::vector&lt;ChanEvent *&gt; &amp;);
    <span class="keyword">friend</span> <span class="keywordtype">int</span> <a class="code" href="dc/d00/classChanEvent.html#a5c2b6a074d7d76c28ed59213ccbf2604">ReadBuffDataF</a>(<a class="code" href="de/d50/namespacepixie.html#a4d463bba17753f4ed7c225121124281f" title="a pixie word">pixie::word_t</a> *, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> *, std::vector&lt;ChanEvent *&gt; &amp;);
};

<span class="keywordtype">bool</span> <a class="code" href="d0/dab/ChanEvent_8hpp.html#ae09fbbcc79b8cc287659ec7337ce708d">CompareCorrectedTime</a>(<span class="keyword">const</span> <a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> *a, <span class="keyword">const</span> <a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> *b);
<span class="keywordtype">bool</span> <a class="code" href="d0/dab/ChanEvent_8hpp.html#ae9005810dc7f0fb5c788248f31dd8f62">CompareTime</a>(<span class="keyword">const</span> <a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> *a, <span class="keyword">const</span> <a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> *b);
<span class="preprocessor">#endif</span>
</pre></div><p>In the <a class="el" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> example, all the data members are defined as private and methods that act on the data members are public. This means that only the methods belonging to this class such as GetEnergy() can access the private data members. This prevents the variables from being inadvertently altered by a different portion of the analysis code. I've tried to keep all data members private but haven't in all cases just for simplicity (for example see the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> class in the <a class="el" href="d7/d4b/RawEvent_8hpp.html" title="Header file for the rawevent.">RawEvent.hpp</a> file).</p>
<p>The arguments that must be passed to a method are defined between the parenthesis after the method's name. Thus, the method SetEnergy() must be provided a double-precision numerical value in order to work properly and would look like the following: </p>
<div class="fragment"><pre class="fragment">  chanEvent.SetEnergy(3.1416);
</pre></div><p> The other important aspect of the methods are their return values, which is defined before the method name. For example, the method GetEnergy() returns the value contained in the variable energy which is a double. Therefore to correctly retrieve the value you need to use a double. </p>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">double</span> tempEnergy = chanEvent.GetEnergy();
</pre></div><p> Arguments to methods and results thereof are not limited to basic data types (int, double, char, ...) but can include other objects as well. In the method, GetChanID() method an <a class="el" href="d1/de3/classIdentifier.html" title="Channel identification.">Identifier</a> object is returned. When using any of the methods make sure you know what type of argument is required.</p>
<p>Methods that are defined in the ".hpp" file of the class are said to be defined "inline". Most of the methods in <a class="el" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> are defined inline. One exception is ZeroVar() which is defined in the corresponding '.cpp' file; a portion of which is shown below:</p>
 
  \snippet ChanEvent.cpp Zero Channel
  <p>The only exception to this *.hpp and *.cpp pattern is PixieStd.cpp No class is defined for PixieStd because the main function hissub_ is called from the FORTRAN scan program. A class could probably be constructed but is not strictly necessary in this case.</p>
<h2><a class="anchor" id="Pointers">
Pointers</a></h2>
<p>Pointers are both an incredibly powerful feature of C++ and the easiest way to screw up the code. The two types of pointers in C++ are a pointer by value and a pointer by reference. A pointer by value is declared by an '*' in the C++ code and points to the value contained in a variable. A pointer by reference is declared by an '&amp;' in the C++ code and points to the memory location where a variable is stored. An example usage is: </p>
<div class="fragment"><pre class="fragment">  <a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> eventList[100];
  <span class="comment">// ...</span>
  <a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> *chan;
  chan = &amp;eventList[1];
</pre></div><p> In this section of code a pointer by value 'chan' is created that that will point to a <a class="el" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> object. The second line puts the memory location of eventList[1] (a <a class="el" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> object) into the pointer chan. In this way it is possible to perform actions on chan and have it affect the values contained in the variable eventList[1].</p>
<p>Functions also rely heavily on pointers. By default when a C++ function is passed a variable a local copy is created inside the function. This means that if a value is passed to a function in this manner the function can use the value and alter it but after the function is finished the local copy of the value disappears, and the original is not affected. In general, it is far more useful to have a function act on and permanently alter the original value. This is where pointers are useful. A pointer by reference or value can be passed to a function and actions on the pointer will affect the original data. The passing of pointers is also much less computationally intensive speeding up the data analysis. For example, a function declared to receive a pointer by reference would look like: </p>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> <a class="code" href="d4/d4a/classDetectorDriver.html#a2ae4e98c641d49183631eceb40dc19bb" title="Check threshold and calibrate each channel. Check the thresholds and calibrate the...">DetectorDriver::ThreshAndCal</a>(<a class="code" href="dc/d00/classChanEvent.html" title="A channel event.">ChanEvent</a> *chan);
</pre></div><p> Where a reference to the variable passed to the function is received.</p>
<h2><a class="anchor" id="Vector">
Vector</a></h2>
<p>The vector class is part of the STL (standard template library) that is used in the analysis. A vector is essentially a dynamically expandable array. A vector variable is defined as </p>
<div class="fragment"><pre class="fragment">  vector&lt;int&gt; intVec;
</pre></div><p> where intVec is declared as a vector that contains integer values. The two common functions that are used to act on vectors include the push_back and clear functions. </p>
<div class="fragment"><pre class="fragment">  intVec.push_back(2);
  intVec.push_back(5);
  intVec.clear();
</pre></div><p> The push_back function inserts a value at the end of the vector. In this example the first element of the vector intVec will have a value of 2 and the second element is 5. The clear() function removes all entries in a vector and is extensively used in the code to zero the various vectors that are used. The values of a vector can be retrieved in two different ways. First, you can ask for a specific element using the same syntax as an array, thus </p>
<div class="fragment"><pre class="fragment">  cout &lt;&lt; intVec[1] &lt;&lt; endl;
</pre></div><p> will print out a value of 5.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>C++ index numbering starts at 0 not at 1 as in FORTRAN. Let me repeat since this causes many problems if forgotten. C++ index numbering starts at 0 not at 1 as in FORTRAN.</dd></dl>
<p>The second way to retrieve a value from a vector is through an iterator. This is a pointer that can be pointed any location in the array to retrieve the value at that location. The following section of code would loop over the intVec from beginning to end and print the value of the element. Note the incrementing of the iterator iv using iv++ to go to the next element. Using iterators is, by far, the safest way to access the contents of the vector because an out of bound failure is much more descriptive than simply "Segmentation Fault".</p>
<div class="fragment"><pre class="fragment">  vector&lt;int&gt;::iterator iv;
  <span class="keywordflow">for</span>(vector&lt;int&gt;::iterator it = intVec.end(); it != intVec.begin(); it++) {
    cout &lt;&lt; *it &lt;&lt; endl;
  }
</pre></div><h2><a class="anchor" id="Map">
Map</a></h2>
<p>The map is the other STL feature used in the code. The map allows an association between an unique key and a value. It is defined as </p>
<div class="fragment"><pre class="fragment">  map&lt;string,int&gt; stringIntMap;
</pre></div><p> In this example the key is a string and the associated value is an int. To create a map you have to make pairs of the keys and values as in the following example. </p>
<div class="fragment"><pre class="fragment">  stringIntMap.insert(make_pair(<span class="stringliteral">&quot;dssd&quot;</span>,2));
  stringIntMap.insert(make_pair(<span class="stringliteral">&quot;ge&quot;</span>,15));
</pre></div><p> In this example the key "dssd" is associated with an integer of 2 and the key "ge" is associated with an integer of 15. The associated values can be retrieved either by a direct access using the key or using of the find function. </p>
<div class="fragment"><pre class="fragment">  <span class="keywordtype">int</span> temp;
  temp = stringIntMap[<span class="stringliteral">&quot;dssd&quot;</span>];

  <span class="keywordtype">int</span> temp1;
  temp1 = stringIntMap.find(<span class="stringliteral">&quot;ge&quot;</span>);
</pre></div><p> where temp and temp1 will return 2 and 15 respectively. While associating <a class="el" href="df/dcb/namespacestrings.html" title="Some common string conversion operations.">strings</a> with integers is not very useful, a map of <a class="el" href="df/dcb/namespacestrings.html" title="Some common string conversion operations.">strings</a> associated with objects is a powerful method to associate an unknown number of detector types with data objects as is done in the pixie16 analysis.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>I (SNL) am not a C++ expert! It is possible that in the analysis code things are done inefficiently. Also, the descriptions I have given above may not be completely accurate but instead reflect a lack of understanding on my part. Keep that in mind when reading the manual and the code. If you think things could be done differently for clarity or processing speed please let me know.</dd>
<dd>
I (DTM) might be a C++ expert. </dd>
<dd>
I (SVP) might be a C++ fanboy. </dd></dl>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Jun 2016 for Pixie16 Analysis Software Suite by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
