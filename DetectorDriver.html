<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Pixie16 Analysis Software Suite: Event Processing - DetectorDriver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">Pixie16 Analysis Software</a>&nbsp;&raquo&nbsp;<a class="el" href="refman.html">Reference Manual</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="DetectorDriver">Event Processing - <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a> </a></h1><p>This page describes the aspects of DetectorDriver.cpp used for the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> which remain consistent between experiments and includes five different main functions</p>
<ul>
<li>Init() - initialize the detector driver</li>
<li>ProcessEvent() - processes a complete event passed from ScanList()</li>
<li>ThreshAndCal() - check threshold and calibrate the raw channel energies</li>
<li>PlotRaw() - plot raw experimental energies</li>
<li>PlotCal() - plot calibrated energies</li>
</ul>
<h2><a class="anchor" id="dd-init">
Initialization</a></h2>
<p>The <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a> initialization routine (<a class="el" href="d4/d4a/classDetectorDriver.html#a2d368320dd66a1a368f08ddfb1be7a22">DetectorDriver::Init()</a>) is called with the detector types that have been identified from the event. It then initializes the necessary Analyzers and Processors, reads in the energy Calibration and the Walk correction, and finally initializes the <a class="el" href="d4/db9/classCorrelator.html" title="correlate decays with previous implants">Correlator</a>. The Init methods for the Analyzers and Processors are contained in their own codes.</p>
<h3><a class="anchor" id="ReadCal">
ReadCal</a></h3>
<p>The calibrations are read in during the detector driver initialization (DetectorDriver::ReadCal()) from the file Config.xml. Please see <a class="el" href="xmlconfig.html">XML Based Configuration File</a> Configuration for detailed information.</p>
<p>For each channel with a calibration the type of calibration, and the calibration parameters are read. They are then added to the list of calibrations. If there is no calibration, then any calls for this channel to calibrate the energy returns the energy.</p>
<h2><a class="anchor" id="ProcessEvent">
ProcessEvent</a></h2>
<p>ProcessEvent() accesses the global <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event.">RawEvent</a> and processes it. It first plots the raw and calibrated energy along with performing the calibration and threshold. It then performs two loops over the data.</p>
<p>The first loop is the PreProcees loop. This loop will call the PreProcess method for each of the used processors. The work done in the PreProcess methods __should not__ depend on the results of other Processors.</p>
<p>The second loop calls the main "Process" method for each of the Processors. The work done in these methods may depend on the results from other Processors. This is where the main work of the Processors will be done.</p>
<h3><a class="anchor" id="ThreshAndCal">
ThreshAndCal</a></h3>
<p>ThreshAndCal() receives a pointer to the current channel event. It then proceeds to set values that are calculated from the traces (qdc, phase, etc.). This is also the point at which the energyContraction is applied to the energies. Finally, it applies the energy calibration and walk corrections.</p>
<h4><a class="anchor" id="Trace">
Trace</a></h4>
<p>If a trace is included with the channel object then the trace analysis is invoked through the <a class="el" href="d9/dc0/classTraceAnalyzer.html" title="Abstract class that all trace analyzers are derived from.">TraceAnalyzer</a>.</p>
<h3><a class="anchor" id="PlotRaw">
PlotRaw</a></h3>
<p>The raw energy from the channel is plotted into the appropriate damm spectra as long as it was created in DeclareHistogram.cpp</p>
<h3><a class="anchor" id="PlotCal">
PlotCal</a></h3>
<p>The calibrated energy from the channel is plotted into the appropriate damm spectrum if it was created in DeclareHistogram.cpp </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Jun 2016 for Pixie16 Analysis Software Suite by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
