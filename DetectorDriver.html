<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Pixie16 Analysis Software Suite: Event Processing - DetectorDriver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pixie16 Analysis Software Suite
   </div>
   <div id="projectbrief">Analysis code for processing of .ldf files</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('DetectorDriver.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Event Processing - <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing. ">DetectorDriver</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes the aspects of <a class="el" href="d8/dc6/DetectorDriver_8cpp.html" title="Main driver for event processing. ">DetectorDriver.cpp</a> used for the <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event. ">RawEvent</a> which remain consistent between experiments and includes five different main functions</p><ul>
<li>Init() - initialize the detector driver</li>
<li>ProcessEvent() - processes a complete event passed from <a class="el" href="dd/dd4/PixieStd_8cpp.html#ad07392d6a349339c4fae73f3c175355b" title="event by event analysis ">ScanList()</a></li>
<li>ThreshAndCal() - check threshold and calibrate the raw channel energies</li>
<li>PlotRaw() - plot raw experimental energies</li>
<li>PlotCal() - plot calibrated energies</li>
</ul>
<h1><a class="anchor" id="dd-init"></a>
Initialization</h1>
<p>The <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing. ">DetectorDriver</a> initialization routine (<a class="el" href="d4/d4a/classDetectorDriver.html#a2d368320dd66a1a368f08ddfb1be7a22">DetectorDriver::Init()</a>) is called with the detector types that have been identified from the event. It then initializes the necessary Analyzers and Processors, reads in the energy Calibration and the Walk correction, and finally initializes the <a class="el" href="d4/db9/classCorrelator.html" title="correlate decays with previous implants ">Correlator</a>. The Init methods for the Analyzers and Processors are contained in their own codes.</p>
<h2><a class="anchor" id="ReadCal"></a>
ReadCal</h2>
<p>The calibrations are read in during the detector driver initialization (DetectorDriver::ReadCal()) from the file Config.xml. Please see <a class="el" href="xmlconfig.html">XML Based Configuration File</a> Configuration for detailed information.</p>
<p>For each channel with a calibration the type of calibration, and the calibration parameters are read. They are then added to the list of calibrations. If there is no calibration, then any calls for this channel to calibrate the energy returns the energy.</p>
<h1><a class="anchor" id="ProcessEvent"></a>
ProcessEvent</h1>
<p>ProcessEvent() accesses the global <a class="el" href="de/d77/classRawEvent.html" title="The all important raw event. ">RawEvent</a> and processes it. It first plots the raw and calibrated energy along with performing the calibration and threshold. It then performs two loops over the data.</p>
<p>The first loop is the PreProcees loop. This loop will call the PreProcess method for each of the used processors. The work done in the PreProcess methods <b>should not</b> depend on the results of other Processors.</p>
<p>The second loop calls the main "Process" method for each of the Processors. The work done in these methods may depend on the results from other Processors. This is where the main work of the Processors will be done.</p>
<h2><a class="anchor" id="ThreshAndCal"></a>
ThreshAndCal</h2>
<p>ThreshAndCal() receives a pointer to the current channel event. It then proceeds to set values that are calculated from the traces (qdc, phase, etc.). This is also the point at which the energyContraction is applied to the energies. Finally, it applies the energy calibration and walk corrections.</p>
<h3><a class="anchor" id="Trace"></a>
Trace</h3>
<p>If a trace is included with the channel object then the trace analysis is invoked through the <a class="el" href="d9/dc0/classTraceAnalyzer.html" title="Abstract class that all trace analyzers are derived from. ">TraceAnalyzer</a>.</p>
<h2><a class="anchor" id="PlotRaw"></a>
PlotRaw</h2>
<p>The raw energy from the channel is plotted into the appropriate damm spectra as long as it was created in DeclareHistogram.cpp</p>
<h2><a class="anchor" id="PlotCal"></a>
PlotCal</h2>
<p>The calibrated energy from the channel is plotted into the appropriate damm spectrum if it was created in DeclareHistogram.cpp </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Pixie16 Analysis Software</a></li><li class="navelem"><a class="el" href="refman.html">Reference Manual</a></li>
    <li class="footer">Generated on Sun Jun 5 2016 08:08:20 for Pixie16 Analysis Software Suite by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
