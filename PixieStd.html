<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Pixie16 Analysis Software Suite: Event Creation - PixieStd</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pixie16 Analysis Software Suite
   </div>
   <div id="projectbrief">Analysis code for processing of .ldf files</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('PixieStd.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Event Creation - PixieStd </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This page describes <a class="el" href="dd/dd4/PixieStd_8cpp.html" title="pixie_std provides the interface between the HRIBF scan and the C++ analysis ">PixieStd.cpp</a> used for event creation and should not have to be altered on a regular basis. PixieStd includes five important functions which control event creation:</p><ul>
<li><a class="el" href="dd/dd4/PixieStd_8cpp.html#a4c73088139b20f913c3f554cfaa1c6a5" title="interface between scan and C++ ">hissub_()</a> - The interface between SCAN and the C++ analysis. Reassemble a complete pixie16 spill of data.</li>
<li><a class="el" href="dd/dd4/PixieStd_8cpp.html#ab9ad920bdbb40b551a7836daebb251c1" title="Extract channel information from the raw parameter array ibuf. ">hissub_sec()</a> - extract channel information from the raw Pixie16 data spill and sort the triggered channels based on time.</li>
<li><a class="el" href="dd/dd4/PixieStd_8cpp.html#ad07392d6a349339c4fae73f3c175355b" title="event by event analysis ">ScanList()</a> - Group channels into events and send to <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing. ">DetectorDriver</a> for processing</li>
<li><a class="el" href="dd/dd4/PixieStd_8cpp.html#ae69c385bab45f356f68ba79d6f650faf">HistoStats()</a> - plot various permanent spectra such as the run time and time between events.</li>
</ul>
<h1><a class="anchor" id="pstd-hissub"></a>
pstd-hissub</h1>
<p>PixieStd is the interface between the HRIBF scan program and the Pixie16 C++ analysis. <a class="el" href="dd/dd4/PixieStd_8cpp.html#a4c73088139b20f913c3f554cfaa1c6a5" title="interface between scan and C++ ">hissub_()</a> is called from scan with two variables. The first, ibuf, is a pointer to the array where the raw data is stored. The second, nhw, describes the amount of raw data that is stored in the array.</p>
<p>In a typical experiment with the new pixie16 readout (default), all Pixie16 modules are read out when one module has reached its maximum number of events or FIFO threshold. This is programmed during experimental setup. This spill of data is divided into smaller chunks of data for transmission across the network. <a class="el" href="dd/dd4/PixieStd_8cpp.html#a4c73088139b20f913c3f554cfaa1c6a5" title="interface between scan and C++ ">hissub_()</a> collects the chunks of data to reassemble the complete spill.</p>
<h1><a class="anchor" id="hissub_sec"></a>
hissub_sec</h1>
<p>Once the spill is reassembled, <a class="el" href="dd/dd4/PixieStd_8cpp.html#ab9ad920bdbb40b551a7836daebb251c1" title="Extract channel information from the raw parameter array ibuf. ">hissub_sec()</a> scans the reconstructed buffer to extract individual triggered channels using the <a class="el" href="dd/dd4/PixieStd_8cpp.html#a7f98a63ff5452a9da26b7d6a770b729e">ReadBuffData()</a> function. The individual channels are inserted into the list of events and once the spill has been completely scanned the list is sorted based on the event time of each individual channel.</p>
<h1><a class="anchor" id="pstd-ScanList"></a>
pstd-ScanList</h1>
<p>After the list of channels that triggered in the current spill has been sorted by time, <a class="el" href="dd/dd4/PixieStd_8cpp.html#ad07392d6a349339c4fae73f3c175355b" title="event by event analysis ">ScanList()</a> is called. This function scans the list of channels and groups channels with similar times together into events. Starting from the beginning of the list and continuing to the end, an individual channel event time is compared with the previous channel event time to determine if they occur within the time period defined by the EventWidth variable (in units proper to the revision) and</p><ul>
<li>if yes - the two channels are considered to belong to the same event and the current channel is added to the list of channels in rawEvent.</li>
<li>if no - the previous rawEvent is considered complete and is sent to the <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing. ">DetectorDriver</a> for processing. Once processing is finished, the rawEvent variable is cleared and the current channel is placed inside it to begin a new event. </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Pixie16 Analysis Software</a></li><li class="navelem"><a class="el" href="refman.html">Reference Manual</a></li>
    <li class="footer">Generated on Sun Jun 5 2016 08:08:20 for Pixie16 Analysis Software Suite by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
