<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Pixie16 Analysis Software Suite: Event Creation - PixieStd</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">Pixie16 Analysis Software</a>&nbsp;&raquo&nbsp;<a class="el" href="refman.html">Reference Manual</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="PixieStd">Event Creation - PixieStd </a></h1><p>This page describes PixieStd.cpp used for event creation and should not have to be altered on a regular basis. PixieStd includes five important functions which control event creation:</p>
<ul>
<li>hissub_() - The interface between SCAN and the C++ analysis. Reassemble a complete pixie16 spill of data.</li>
<li>hissub_sec() - extract channel information from the raw Pixie16 data spill and sort the triggered channels based on time.</li>
<li>ScanList() - Group channels into events and send to <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a> for processing</li>
<li>HistoStats() - plot various permanent spectra such as the run time and time between events.</li>
</ul>
<h2><a class="anchor" id="pstd-hissub">
pstd-hissub</a></h2>
<p>PixieStd is the interface between the HRIBF scan program and the Pixie16 C++ analysis. hissub_() is called from scan with two variables. The first, ibuf, is a pointer to the array where the raw data is stored. The second, nhw, describes the amount of raw data that is stored in the array.</p>
<p>In a typical experiment with the new pixie16 readout (default), all Pixie16 modules are read out when one module has reached its maximum number of events or FIFO threshold. This is programmed during experimental setup. This spill of data is divided into smaller chunks of data for transmission across the network. hissub_() collects the chunks of data to reassemble the complete spill.</p>
<h2><a class="anchor" id="hissub_sec">
hissub_sec</a></h2>
<p>Once the spill is reassembled, hissub_sec() scans the reconstructed buffer to extract individual triggered channels using the ReadBuffData() function. The individual channels are inserted into the list of events and once the spill has been completely scanned the list is sorted based on the event time of each individual channel.</p>
<h2><a class="anchor" id="pstd-ScanList">
pstd-ScanList</a></h2>
<p>After the list of channels that triggered in the current spill has been sorted by time, ScanList() is called. This function scans the list of channels and groups channels with similar times together into events. Starting from the beginning of the list and continuing to the end, an individual channel event time is compared with the previous channel event time to determine if they occur within the time period defined by the EventWidth variable (in units proper to the revision) and</p>
<ul>
<li>if yes - the two channels are considered to belong to the same event and the current channel is added to the list of channels in rawEvent.</li>
<li>if no - the previous rawEvent is considered complete and is sent to the <a class="el" href="d4/d4a/classDetectorDriver.html" title="DetectorDriver controls event processing.">DetectorDriver</a> for processing. Once processing is finished, the rawEvent variable is cleared and the current channel is placed inside it to begin a new event. </li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Jun 2016 for Pixie16 Analysis Software Suite by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
