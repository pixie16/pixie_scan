<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Pixie16 Analysis Software Suite: WalkCorrector Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Pixie16 Analysis Software Suite
   </div>
   <div id="projectbrief">Analysis code for processing of .ldf files</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="../../classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="../../inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="../../functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d1/dc2/classWalkCorrector.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a>  </div>
  <div class="headertitle">
<div class="title">WalkCorrector Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class to correct channels for walk in the onboard filters.  
 <a href="../../d1/dc2/classWalkCorrector.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="../../d9/d27/WalkCorrector_8hpp_source.html">WalkCorrector.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for WalkCorrector:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/d5c/classWalkCorrector__coll__graph.png" border="0" usemap="#WalkCorrector_coll__map" alt="Collaboration graph"/></div>
<map name="WalkCorrector_coll__map" id="WalkCorrector_coll__map">
</map>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a1b3f9fc95a7417a3c7a15bb6d7db2630"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#a1b3f9fc95a7417a3c7a15bb6d7db2630">WalkCorrector</a> ()</td></tr>
<tr class="separator:a1b3f9fc95a7417a3c7a15bb6d7db2630"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af350b56a14d4d59dae55d48cb614923d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#af350b56a14d4d59dae55d48cb614923d">AddChannel</a> (const <a class="el" href="../../d1/de3/classIdentifier.html">Identifier</a> &amp;chanID, const std::string model, double min, double max, const std::vector&lt; double &gt; &amp;par)</td></tr>
<tr class="separator:af350b56a14d4d59dae55d48cb614923d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50b349b8c9c13718459f45828438f87d"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#a50b349b8c9c13718459f45828438f87d">GetCorrection</a> (<a class="el" href="../../d1/de3/classIdentifier.html">Identifier</a> &amp;chanID, double raw) const </td></tr>
<tr class="separator:a50b349b8c9c13718459f45828438f87d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a07bdec5e5bb01c4c4a023f48960fa444"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#a07bdec5e5bb01c4c4a023f48960fa444">Model_None</a> () const </td></tr>
<tr class="separator:a07bdec5e5bb01c4c4a023f48960fa444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbe76204f12cde5216b7d36f7c12a5a9"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#acbe76204f12cde5216b7d36f7c12a5a9">Model_A</a> (const std::vector&lt; double &gt; &amp;par, double raw) const </td></tr>
<tr class="separator:acbe76204f12cde5216b7d36f7c12a5a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad410acfb1a247c05e0089ca56d71968c"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#ad410acfb1a247c05e0089ca56d71968c">Model_B1</a> (const std::vector&lt; double &gt; &amp;par, double raw) const </td></tr>
<tr class="separator:ad410acfb1a247c05e0089ca56d71968c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a806666ea6dcd02094e392240f869be28"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#a806666ea6dcd02094e392240f869be28">Model_B2</a> (const std::vector&lt; double &gt; &amp;par, double raw) const </td></tr>
<tr class="separator:a806666ea6dcd02094e392240f869be28"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9478a62bd18eec46a6588fcfebcc018d"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="../../d1/de3/classIdentifier.html">Identifier</a>, std::vector&lt; <a class="el" href="../../d7/d18/structCorrectionParams.html">CorrectionParams</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc2/classWalkCorrector.html#a9478a62bd18eec46a6588fcfebcc018d">channels_</a></td></tr>
<tr class="separator:a9478a62bd18eec46a6588fcfebcc018d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class to correct channels for walk in the onboard filters. </p>
<p>The purpose of the <a class="el" href="../../d1/dc2/classWalkCorrector.html" title="Class to correct channels for walk in the onboard filters. ">WalkCorrector</a> class is to correct certain channels for the walk (connected with the detector response, usually the lower the event energy, the slower is the response). The resulting correction should be subtracted from the raw time in order to compensate the slower response. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1b3f9fc95a7417a3c7a15bb6d7db2630"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">WalkCorrector::WalkCorrector </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Default Constructor </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af350b56a14d4d59dae55d48cb614923d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WalkCorrector::AddChannel </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/de3/classIdentifier.html">Identifier</a> &amp;&#160;</td>
          <td class="paramname"><em>chanID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>min</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>par</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Add new channel, identified by chanID to the list of known channels and their calibration model, range and parameters </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chanID</td><td>: The ID to add to the known list of corrections </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">model</td><td>: the model to use to correct the channel </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">min</td><td>: The lower bound of the correction range </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max</td><td>: The upper bound of the correction range </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">par</td><td>: The vector of parameters to use for the calibration </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a50b349b8c9c13718459f45828438f87d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double WalkCorrector::GetCorrection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/de3/classIdentifier.html">Identifier</a> &amp;&#160;</td>
          <td class="paramname"><em>chanID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns time correction that should be subtracted from the raw time. The channel is identified by <a class="el" href="../../d1/de3/classIdentifier.html" title="Channel identification. ">Identifier</a> class, the correction is return accordingly to the selected model and parameters for the particular channel. If channel has not been added to the list, it returns 0 as a default value. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">chanID</td><td>: The channel identifier to get </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">raw</td><td>: The raw value to perform the correction on </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The walk corrected value of raw </dd></dl>

</div>
</div>
<a class="anchor" id="acbe76204f12cde5216b7d36f7c12a5a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double WalkCorrector::Model_A </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>par</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This model describes the correction as a function of raw energy (ch number): f(x) = a0 + a1 / (a2 + x) + a3 * exp(-x / a4) the returned value is in 'natural' pixie units Developed for 85,86Ga experiment </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">par</td><td>: the vector of parameters for calibration </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">raw</td><td>: the raw value to calibrate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The corrected time in pixie units </dd></dl>

</div>
</div>
<a class="anchor" id="ad410acfb1a247c05e0089ca56d71968c"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double WalkCorrector::Model_B1 </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>par</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This model was developed for the 93Br experiment f(x) = a0 + a1 * x + a2 * x^2 + a3 * x^3 + a4 / (1 + exp((x - a5) / a6)) the returned value is in 'natural' pixie units</p>
<p>This function is intended for low energy part, for high energy part use B2 model. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">par</td><td>: the vector of parameters for calibration </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">raw</td><td>: the raw value to calibrate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the corrected time in pixie units </dd></dl>

</div>
</div>
<a class="anchor" id="a806666ea6dcd02094e392240f869be28"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double WalkCorrector::Model_B2 </td>
          <td>(</td>
          <td class="paramtype">const std::vector&lt; double &gt; &amp;&#160;</td>
          <td class="paramname"><em>par</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>raw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is the second part of 'B' model developed for the 93Br experiment f(x) = a0 + a1 * x + (a2 + a3 * x + a4 * x^2) * exp(-x / a5) the returned value is in 'natural' pixie units</p>
<p>This function is intended for high energy part, for low energy part use B1 model. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">par</td><td>: the vector of parameters for calibration </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">raw</td><td>: the raw value to calibrate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>corrected time in pixie units </dd></dl>

</div>
</div>
<a class="anchor" id="a07bdec5e5bb01c4c4a023f48960fa444"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double WalkCorrector::Model_None </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd>always 0. Use if you want to switch off the correction. Also not adding the channel to the list results in returning 0 from GetCorrection function. </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="a9478a62bd18eec46a6588fcfebcc018d"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="../../d1/de3/classIdentifier.html">Identifier</a>, std::vector&lt;<a class="el" href="../../d7/d18/structCorrectionParams.html">CorrectionParams</a>&gt; &gt; WalkCorrector::channels_</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Map where key is a channel <a class="el" href="../../d1/de3/classIdentifier.html" title="Channel identification. ">Identifier</a> and value is a vector holding struct with calibration range and walk correction model and parameters. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/<a class="el" href="../../d9/d27/WalkCorrector_8hpp_source.html">WalkCorrector.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d1/dc2/classWalkCorrector.html">WalkCorrector</a></li>
    <li class="footer">Generated on Wed Sep 9 2015 09:58:15 for Pixie16 Analysis Software Suite by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.10 </li>
  </ul>
</div>
</body>
</html>
