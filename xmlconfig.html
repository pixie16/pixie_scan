<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Pixie16 Analysis Software Suite: XML Based Configuration File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="main.html">Pixie16 Analysis Software</a>&nbsp;&raquo&nbsp;<a class="el" href="refman.html">Reference Manual</a>&nbsp;&raquo&nbsp;<a class="el" href="DetectorDriver.html">Event Processing - DetectorDriver</a>
  </div>
</div>
<div class="contents">


<h1><a class="anchor" id="xmlconfig">XML Based Configuration File </a></h1><p>The configuration of the code is now handled solely through an XML file. The old style of map files have been deprecated and are no longer supported in the main versions of the code. We summarize here the various sections of the configuration that you will encounter. There is an example configuration file: config/Config.xml.example.</p>
<h2><a class="anchor" id="xml-setup">
Link the proper Config.xml</a></h2>
<p>The Config.xml file is a symbolic link to one of the various configuration files in the config directory. In order to switch to different configurations you simply need to issue the following command: </p>
<div class="fragment"><pre class="fragment">  ln -s -f config/Config.xml.example Config.xml
</pre></div><p> This will point the Config.xml link to the proper configuration file.</p>
<h2><a class="anchor" id="xml-guts">
The Guts of the Config.xml</a></h2>
<h3><a class="anchor" id="xml-author">
Author Information</a></h3>
<p>Put your name, email and date (please use Jan, Feb, ..., Dec for months names). </p>
<h3><a class="anchor" id="xml-desc">
Description</a></h3>
<p>Put short description of your experiment here. </p>
<h3><a class="anchor" id="xml-global">
Global Configuration Settings</a></h3>
<p>Global scan parameters are setup here. Required fields are:</p>
<ul>
<li>Revision : <div class="fragment"><pre class="fragment"> &lt;Revision version=<span class="stringliteral">&quot;X&quot;</span>/&gt; 
</pre></div> where X is A, D or F</li>
<li>EventWidth : <div class="fragment"><pre class="fragment"> &lt;EventWidth units=<span class="stringliteral">&quot;x&quot;</span> value=<span class="stringliteral">&quot;y&quot;</span>/&gt; 
</pre></div> where unit must be s, ms, us or ns; value is floating point</li>
<li>EnergyContraction : <div class="fragment"><pre class="fragment"> &lt;EnergyContraction value=<span class="stringliteral">&quot;x&quot;</span> /&gt; 
</pre></div> OBSOLETE, please do not use energy contraction (consider calibration instead), however if needed for backward compatibility put here floating point number</li>
<li>Path : <div class="fragment"><pre class="fragment"> &lt;Path&gt;relatative_path&lt;/Path&gt; 
</pre></div> where 'relative_path' is a path to the other configurations files not included into this xml document. At the moment only qdc.txt is not incorporated into this file. relative_path must end with '/' unless is empty (which then points to the current directory).</li>
<li>NumOfTraces : <div class="fragment"><pre class="fragment"> &lt;NumOfTraces value=<span class="stringliteral">&quot;x&quot;</span> /&gt; 
</pre></div> where x is unsigned integer giving the maximum number of traces in 2D traces histograms. This number is rounded up to the power of 2, since DAMM histograms must have such sizes</li>
</ul>
<h3><a class="anchor" id="xml-ignore">
Rejection Regions</a></h3>
<p>The Reject node isn't for people who have flunked out, but for the rejection of specific time regions of the LDF. For example, if the beam cut out at the end of your run but still want to use the first five minutes you can define </p>
<div class="fragment"><pre class="fragment"> &lt;Time start=<span class="stringliteral">&quot;300&quot;</span> end=<span class="stringliteral">&quot;16000&quot;</span>/&gt; 
</pre></div><p> The program will now ignore everything after 300 seconds of the file.</p>
<h3><a class="anchor" id="xml-dd">
DetectorDriver Setup</a></h3>
<p>You will set up the various processors and analyzers in this node. To add a new processor to the analysis: </p>
<div class="fragment"><pre class="fragment"> &lt;Process name=<span class="stringliteral">&quot;SomethingProcessor&quot;</span>/&gt; 
</pre></div><p> Similarly for an analyzer : </p>
<div class="fragment"><pre class="fragment"> &lt;Analyzer name=<span class="stringliteral">&quot;SomethingAnalyzer&quot;</span>/&gt; 
</pre></div><p> Simply repeat this process for each Processor and Analyzer that you would like to add.</p>
<p>List of known Processors:</p>
<ul>
<li>BeamLogicProcessor</li>
<li><a class="el" href="dd/db1/classBetaScintProcessor.html" title="Detector processor that handles scintillator detectors for beta detection.">BetaScintProcessor</a></li>
<li><a class="el" href="d3/ddd/classDoubleBetaProcessor.html" title="A generic processor to be used as a template for others.">DoubleBetaProcessor</a></li>
<li><a class="el" href="d0/d59/classDssdProcessor.html" title="Handles detectors of type dssd_front and dssd_back.">DssdProcessor</a></li>
<li><a class="el" href="d1/d90/classGeProcessor.html" title="Processor to handle Ge (read as clover) events.">GeProcessor</a><ul>
<li>optional attributes and their default values:<ul>
<li>gamma_threshold="1.0"</li>
<li>low_ratio="1.0"</li>
<li>high_ratio="3.0"</li>
<li>sub_event="100e-9"</li>
<li>gamma_beta_limit="200e-9"</li>
<li>gamma_gamma_limit="200e-9"</li>
<li>cycle_gate1_min="0.0"</li>
<li>cycle_gate1_max="0.0"</li>
<li>cycle_gate2_min="0.0"</li>
<li>cycle_gate2_max="0.0"</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="d8/d12/classGeCalibProcessor.html" title="A class to handle the calibrations for the Ge Processor.">GeCalibProcessor</a><ul>
<li>optional attributes and their default values:<ul>
<li>gamma_threshold="1.0"</li>
<li>low_ratio="1.0"</li>
<li>high_ratio="3.0"</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="d0/da2/classHen3Processor.html" title="Processor to handle 3Hen detector.">Hen3Processor</a></li>
<li><a class="el" href="dd/d2f/classImplantSsdProcessor.html" title="Handles detectors of type ssd:implant.">ImplantSsdProcessor</a></li>
<li><a class="el" href="dd/da0/classIonChamberProcessor.html" title="Processor to handle ion chambers.">IonChamberProcessor</a></li>
<li><a class="el" href="d6/d6d/classLiquidScintProcessor.html" title="Class to handle liquid scintillator.">LiquidScintProcessor</a></li>
<li><a class="el" href="d7/dbe/classLogicProcessor.html" title="Class to handle logic signals.">LogicProcessor</a></li>
<li><a class="el" href="db/d91/classMcpProcessor.html" title="Class that handles MCP detectors.">McpProcessor</a></li>
<li>MtcProcessor<ul>
<li>optional attributes and their default values:<ul>
<li>double_stop="False"</li>
<li>double_start="False"</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="db/ddd/classNeutronScintProcessor.html" title="Class to handle Neutron Scintillators (that are not VANDLE).">NeutronScintProcessor</a></li>
<li><a class="el" href="d8/d3a/classPositionProcessor.html" title="Processor to calculate the position in SSDs.">PositionProcessor</a></li>
<li><a class="el" href="d7/d9f/classPulserProcessor.html" title="A class to handle time differences between two pulsers.">PulserProcessor</a></li>
<li>SsdProcesssor</li>
<li>TriggerLogicProcessor</li>
<li><a class="el" href="de/d92/classVandleProcessor.html" title="Class to process VANDLE related events.">VandleProcessor</a><ul>
<li>Required Attributes and their Default Values:<ul>
<li>bars="small" (CSV list, uses small,medium,big)</li>
<li>NumStarts="2" (the number of start detectors you have)</li>
<li>res="2" (sets the resolution of the time histograms to 0.5 ns/bin)</li>
<li>offset="200" (sets the arbitrary zero of the histogram to 200)</li>
</ul>
</li>
</ul>
</li>
<li><a class="el" href="d3/db0/classRootProcessor.html" title="A Class to handle outputting things into ROOT.">RootProcessor</a> (Requires the USEROOT compiler flag)</li>
</ul>
<p>List of known Analyzers:</p>
<ul>
<li>TraceFilterer<ul>
<li>mandatory attributes and their default values:<ul>
<li>gain_match="1.0"</li>
<li>fast_rise="10"</li>
<li>fast_gap="10"</li>
<li>fast_threshold="50"</li>
<li>energy_rise="50"</li>
<li>energy_gap="50"</li>
</ul>
</li>
<li>optional attributes and their default values:<ul>
<li>slow_rise="20"</li>
<li>slow_gap="20"</li>
<li>slow_threshold="10"</li>
</ul>
</li>
</ul>
</li>
<li>DoubleTraceAnalyzer<ul>
<li>see TraceFilterer</li>
</ul>
</li>
<li><a class="el" href="d2/d52/classTauAnalyzer.html" title="Class to analyze Tau from a trace.">TauAnalyzer</a></li>
<li><a class="el" href="d5/d42/classTraceExtractor.html" title="A class to extract traces from events.">TraceExtractor</a></li>
<li><a class="el" href="d5/da3/classWaveformAnalyzer.html" title="Class to handle the HRT and waveform analysis.">WaveformAnalyzer</a></li>
<li><a class="el" href="db/dde/classFittingAnalyzer.html" title="Analyzer that handles the fitting of traces for High Resolution Timing.">FittingAnalyzer</a> (requires PULSEFIT compiler flag in Makefile)</li>
<li><a class="el" href="d7/d5d/classCfdAnalyzer.html" title="Class to analyze traces using a digital CFD.">CfdAnalyzer</a></li>
</ul>
<h3><a class="anchor" id="xml-map">
Channels map</a></h3>
<p>This section replaces the map.txt (map2.txt) and cal.txt files. For each channel in each module that you want to use in analysis you must assign some physical detector type (and subtype) which is known to the pixie_scan (see DetectorLibrary.cpp). A channel may be also calibrated (by default a raw channel number from adc is used) or corrected against walk (by default walk correction is equal to 0).</p>
<p>The root element (&lt;Map&gt;) may have attributes changing the verbosity level during loading of the configuration in this section :</p>
<ul>
<li>verbose_map - output loaded modules and channels</li>
<li>verbose_calibration - Output energy calibration information</li>
<li>verbose_walk - Output walk correction information</li>
</ul>
<p>Each attribute default to False, if change to True will show more messages concerning loaded parameters etc.</p>
<h4><a class="anchor" id="xml-cals">
Calibrations</a></h4>
<p>-Energy :</p>
<ul>
<li>raw : non-calibrated (also used when no calibration specified)</li>
<li>off : turn channel off (returns always 0)</li>
<li>linear : requires 2 parameters</li>
<li>quadratic : requires 3 parameters</li>
<li>cubic : a third order polynomial correction, requires 4 parameters</li>
<li>polynomial : more general but slightly slower then the two above : requires at least 1 parameter</li>
<li>hyplin : f(x) = a0/x + a1 + a2*x , suitable if problems with low channels are encountered - requires 3 parameters</li>
</ul>
<p>-Time Walk :</p>
<ul>
<li>None : returns always 0</li>
<li>A : f(x) = a0 + a1 / (a2 + x) + a3 * exp(-x/a4), derived for the ge detectors at 85-86Ga experiment - requires 5 parameters</li>
<li>B1 : f(x) = a0 + (a1 + a2 / (x + 1)) * exp(-x / a4) This model was developed for the ge detectors at 93Br experiment. Use it for the low energy part of spectra. For the high energy part use B2 model.</li>
<li>B2 f(x) = a0 + a1 * exp(-x / a2) This function is the second part of 'B' model developed for the 93Br experiment Note that walk models parameters are intended to operate on natural units i.e. raw channel numbers and <a class="el" href="de/d50/namespacepixie.html" title="Pixie module related things that should not change between revisions.">pixie</a> time tics.</li>
</ul>
<p>Both calibration and walk correction operate on some range and there might be any number of ranges defined for the channel. The code does not check if a range overlaps with another. For a given channel number the first (in order of appearance) matching range will be used.</p>
<p>If no min/max is specified, a 0 to infinity range is assumed (where infinity is a largest double precision floating point number on a given machine).</p>
<h4><a class="anchor" id="xml-mapex">
Map Example</a></h4>
<p>An example below shows the main features of the Map node. </p>
<div class="fragment"><pre class="fragment">    &lt;Map verbose_map=<span class="stringliteral">&quot;True&quot;</span> verbose_calibration=<span class="stringliteral">&quot;True&quot;</span> verbose_walk=<span class="stringliteral">&quot;True&quot;</span>&gt;
        &lt;Module number=<span class="stringliteral">&quot;0&quot;</span>&gt;
            &lt;Channel number=<span class="stringliteral">&quot;0&quot;</span> type=<span class="stringliteral">&quot;ge&quot;</span> subtype=<span class="stringliteral">&quot;clover_high&quot;</span>&gt;
                &lt;Calibration model=<span class="stringliteral">&quot;quadratic&quot;</span> min=<span class="stringliteral">&quot;0&quot;</span> max=<span class="stringliteral">&quot;100&quot;</span>&gt;
                    -0.912 0.625 1.2390e-5
                &lt;/Calibration&gt;
                &lt;Calibration model=<span class="stringliteral">&quot;linear&quot;</span> min=<span class="stringliteral">&quot;100&quot;</span>&gt;
                    0.1 0.515
                &lt;/Calibration&gt;
                &lt;WalkCorrection model=<span class="stringliteral">&quot;A&quot;</span>&gt;
                    2.322 12487.727 432.257 19.268 140.189
                &lt;/WalkCorrection&gt;
            &lt;/Channel&gt;
            &lt;Channel number=<span class="stringliteral">&quot;1&quot;</span> type=<span class="stringliteral">&quot;beta_scint&quot;</span> subtype=<span class="stringliteral">&quot;beta&quot;</span> location=<span class="stringliteral">&quot;5&quot;</span>
                    tags=<span class="stringliteral">&quot;12,3,first&quot;</span>&gt;
            &lt;/Channel&gt;
            ...
        &lt;/Module&gt;
        &lt;Module number=<span class="stringliteral">&quot;1&quot;</span>&gt;
            ...
        &lt;/Module&gt;
            ...
    &lt;/Map&gt;
</pre></div><h3><a class="anchor" id="xml-tcal">
Time Calibrations</a></h3>
<p>See the <a class="el" href="timecal.html">Time Calibrations and VANDLE Setup</a> section for more detailed information about the various parameters in this calibration.</p>
<p>The time calibrations are for the alignment of detectors that use the high resolution timing algorithms in space and time. This includes all the VANDLE Bars, liquid scintillators, etc. Eventually, this will be updated and expanded based on different VANDLE orientations (i.e. parallel/perpendicular to beam).</p>
<p>NOTE: We currently do no error checking to make sure that an equivalent bar is defined in the Map. In such an event the code will simply return a calibration of zero for all of the possible corrections. </p>
<div class="fragment"><pre class="fragment">    &lt;TimeCalibration verbose_timing=<span class="stringliteral">&quot;False&quot;</span>&gt;
        &lt;Vandle&gt;
            &lt;small&gt;
                &lt;Bar number=<span class="stringliteral">&quot;0&quot;</span> z0=<span class="stringliteral">&quot;50.5&quot;</span> xoffset=<span class="stringliteral">&quot;1.0&quot;</span> zoffset=<span class="stringliteral">&quot;0.00&quot;</span>
                    lroffset=<span class="stringliteral">&quot;-5.70784&quot;</span>&gt;
                    &lt;start loc=<span class="stringliteral">&quot;0&quot;</span> offset=<span class="stringliteral">&quot;2.90192&quot;</span>/&gt;
                    &lt;start loc=<span class="stringliteral">&quot;1&quot;</span> offset=<span class="stringliteral">&quot;-6.52371&quot;</span>/&gt;
                    &lt;start loc=<span class="stringliteral">&quot;2&quot;</span> offset=<span class="stringliteral">&quot;1.23556&quot;</span>/&gt;
                    &lt;start loc=<span class="stringliteral">&quot;3&quot;</span> offset=<span class="stringliteral">&quot;-5.56573&quot;</span>/&gt;
                &lt;/Bar&gt;
                &lt;Bar number=<span class="stringliteral">&quot;1&quot;</span> z0=<span class="stringliteral">&quot;11.0&quot;</span> xoffset=<span class="stringliteral">&quot;1234.0&quot;</span> lroffset=<span class="stringliteral">&quot;-244.0&quot;</span> /&gt;
            &lt;/small&gt;
        &lt;/Vandle&gt;
        &lt;Scint&gt;
            &lt;liquid&gt;
                &lt;Detector number=<span class="stringliteral">&quot;0&quot;</span> r0=<span class="stringliteral">&quot;0.0&quot;</span> xoffset=<span class="stringliteral">&quot;0.0&quot;</span> lroffset=<span class="stringliteral">&quot;0.0&quot;</span>
                     tofoffset0=<span class="stringliteral">&quot;0.0&quot;</span> tofoffset1=<span class="stringliteral">&quot;0.0&quot;</span> /&gt;
            &lt;/liquid&gt;
            &lt;start&gt;
                &lt;Detector number=<span class="stringliteral">&quot;0&quot;</span> r0=<span class="stringliteral">&quot;0.0&quot;</span> xoffset=<span class="stringliteral">&quot;0.0&quot;</span> lroffset=<span class="stringliteral">&quot;0.0&quot;</span>
                     tofoffset0=<span class="stringliteral">&quot;0.0&quot;</span> tofoffset1=<span class="stringliteral">&quot;0.0&quot;</span> /&gt;
            &lt;/start&gt;
        &lt;/Scint&gt;
    &lt;/TimeCalibration&gt;
</pre></div><h3><a class="anchor" id="xml-treecorr">
Tree Correlator Information</a></h3>
<p>Create here tree of "places" build of &lt;<a class="el" href="d9/d58/classPlace.html" title="A pure abstract class to define a &quot;place&quot; for correlator.">Place</a>&gt; elements for your experiment. Basic places are created automatically from entries in the Map section using type_subtype_location pattern.</p>
<p>Root element should be named &lt;<a class="el" href="d2/da4/classTreeCorrelator.html" title="Singleton class holding map of all places.">TreeCorrelator</a>&gt;. Each &lt;<a class="el" href="d9/d58/classPlace.html" title="A pure abstract class to define a &quot;place&quot; for correlator.">Place</a>&gt; element has a following attributes:</p>
<ul>
<li>'name' : required, if last token in name (tokens are separated by '_') characters are in format X-Y,Z where X, Y and Z are integers, a whole range X to Y is assumed (e.g. beta_0-1,5,9-10 will create beta_0, beta_1, beta_5, beta_9 and beta_10 ) Optional attributes:</li>
<li>'type' : must be one of types defined in PlaceBuilder.cpp (see there) currently available are: <a class="el" href="d5/dc3/classPlaceDetector.html" title="The basic detector which does not depend on children status. Will use info_ map to...">PlaceDetector</a>, <a class="el" href="d9/df0/classPlaceThreshold.html" title="Each activation must be within the set thresholds.">PlaceThreshold</a>, <a class="el" href="df/d8f/classPlaceThresholdOR.html" title="Each activation must be within the set thresholds.">PlaceThresholdOR</a>, <a class="el" href="d8/d90/classPlaceCounter.html" title="Counts number of activations coming from directly or from children.">PlaceCounter</a>, <a class="el" href="d3/d39/classPlaceOR.html" title="An abstract place using OR logic to set the activation of places.">PlaceOR</a>, <a class="el" href="d3/d8e/classPlaceAND.html" title="Similar to PlaceOR but uses AND relation.">PlaceAND</a> if type is not used or empty (type="") it is assumed that place already exists. In particular this is true for all basic places created from channels as defined from Map</li>
<li>'replace' : if set to 'true', will replace existing place with a one defined in this element.</li>
<li>'fifo' : depth of FIFO of place</li>
<li>'coincidence' : defines type of relation with parent (true of false)</li>
<li>'low_limit', 'high_limit' : required for <a class="el" href="d9/df0/classPlaceThreshold.html" title="Each activation must be within the set thresholds.">PlaceThreshold</a> and <a class="el" href="df/d8f/classPlaceThresholdOR.html" title="Each activation must be within the set thresholds.">PlaceThresholdOR</a> defines threshold limits (calibrated energy).</li>
</ul>
<p>See <a class="el" href="de/df9/classPlaceBuilder.html" title="Create place, alter or add existing place to the tree.">PlaceBuilder</a> for other type of places and attributes.</p>
<h3><a class="anchor" id="xml-notes">
Notebook</a></h3>
<p>Configuration of <a class="el" href="db/d1e/classNotebook.html" title="A class to output things to a notebook.">Notebook</a> object that saves handy notes (things that are not easy to present on graph e.g. single event details) file - file in which the notes are saved mode - 'a' for append, 'r' - for replace mode </p>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on 4 Jun 2016 for Pixie16 Analysis Software Suite by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
